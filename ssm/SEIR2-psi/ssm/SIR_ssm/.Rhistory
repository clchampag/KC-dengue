}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
#analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=1000)
#do_lhs()
summarize_lhs()
get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
#analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
generate_lhs_2(sample_size=10000)
do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
#analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=10000)
#do_lhs()
summarize_lhs()
get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
#analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
generate_lhs_2(sample_size=50000)
do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
#analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=50000)
#do_lhs()
summarize_lhs()
get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
#analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=50000)
#do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
system(cmd)
plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
#analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=50000)
#do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex-1.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=50000)
#do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=50000)
#do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=50000)
#do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
main <- function() {
model <- "SIR_ssm"
start_me(model=model)
data <- read.csv(file.path(dir_data,"dataALLsouches_J.csv"))
#ssm_build_model(dir_ssm=dir_ssm, model=model, sde=NULL, data=data,  dist_observation1="discretized_normal", dist_observation2 = "discretized_normal")
#generate_lhs_2(sample_size=50000)
#do_lhs()
#summarize_lhs()
#get_map_lhs()
##summarize_mcmc()
#get_map_mcmc()
#SIMULATIONS A PARTIR DU SIMPLEX
# simulate under map
dir_simu <- file.path(dir_model,"simu")
if(!file.exists(dir_simu)){
dir.create(dir_simu)
}
# deterministic
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./simul sde --traj --root %s ",dir_model,dir_simu)
#system(cmd)
#plot_simu(model)
dir_det <- file.path(dir_model,"mcmc")
if(!file.exists(dir_det)){
dir.create(dir_det)
}
#cmd <- sprintf("cd %s/bin; cat ../theta_map_simplex.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det.json | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det2.json",dir_model,dir_det, dir_model)
#system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det2.json | ./pmcmc -J 1 -M 1000000  | ./pmcmc -J 1 -M 100000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det3.json",dir_model,dir_det, dir_model)
#system(cmd)
cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det3.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det4.json",dir_model,dir_det, dir_model)
system(cmd)
#cmd <- sprintf("cd %s/bin; cat ../theta_pmcmc_det4.json | ./pmcmc -J 1 -M 100000 --switch 500000 --trace --traj --hat -I 1 --root %s > %s/theta_pmcmc_det5.json",dir_model,dir_det, dir_model)
#system(cmd)
analyse_mcmc(burn = 0, thin = 0, likelihood=c("deterministic"), theta_true=NULL)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2002-01-07 | ./simul -I 128 --start 2002-01-07  --end 2025-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; ssm-predict ../theta_pmcmc_det5.json ../mcmc/X_1.csv ../mcmc/trace_1.csv 2013-12-30 | ./simul -I 131 --start 2013-12-30  --end 2015-12-31 --verbose --hat --traj --root %s",dir_model,dir_det)
#system(cmd)
#cmd <- sprintf(" cd %s/bin; cat ../theta_pmcmc_det5.json  | ./simul -I 3  --end 2013-12-30 --verbose --traj --root %s",dir_model,dir_det)
#system(cmd)
}
main()
